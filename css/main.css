
    /* =========================
       SOLAR NEBULA PRO — TOKENS
    ========================= */
    :root {
      /* Gradientes Solares */
      --bg-day: radial-gradient(circle at 20% 10%, #fff9c4 0%, #ffe082 35%, #ffb74d 70%, #ff9800 100%);
      --bg-sunset: radial-gradient(circle at 10% 0%, #ffd180 0%, #ff8a65 30%, #f06292 60%, #7e57c2 100%);
      --bg-night: radial-gradient(circle at 20% 0%, #0b1020 0%, #121c3b 40%, #1a237e 80%, #000000 100%);

      /* UI Base */
      --bg-deep: #050811;
      --bg-panel: rgba(10, 14, 24, 0.90);
      --primary: #00f5ff;
      --secondary: #ff4bff;
      --text-main: #e4ecff;
      --text-muted: #9aa4c8;
      --danger: #ff4b6b;
      
      --glass: blur(16px) saturate(180%);
      --border-light: 1px solid rgba(255, 255, 255, 0.08);
      
      --radius-lg: 24px;
      --radius-md: 12px;
      --radius-sm: 8px;
      
      --sun-scale: 1;
    }

    /* =========================
       ESTILOS DO BODY & MODO SOLAR
    ========================= */
    body {
        margin: 0; padding: 0;
        width: 100vw; height: 100vh;
        background: var(--bg-deep); /* Fallback */
        color: var(--text-main);
        font-family: "Montserrat", system-ui, sans-serif;
        overflow: hidden;
        display: flex; flex-direction: column;
        transition: background 0.8s cubic-bezier(0.4, 0, 0.2, 1), color 0.4s ease;
    }

    /* Mapeamento de Modos */
    body.mode-day { background: var(--bg-day) !important; color: #1a1a1a !important; }
    body.mode-sunset { background: var(--bg-sunset) !important; color: #fff !important; }
    body.mode-night { background: var(--bg-night) !important; color: var(--text-main) !important; }

    /* Adaptação de UI Interna baseada no Modo */
    body.mode-day .msg-block.ai { background: rgba(0,0,0,0.05); color: #222; border-color: rgba(0,0,0,0.1); }
    body.mode-day .msg-block.user { background: rgba(0,245,255,0.1); color: #000; border-color: var(--primary); }
    body.mode-day .glass-input { background: rgba(255,255,255,0.8); color: #000; border-color: #ccc; }
    body.mode-day #usernameDisplay { color: #444; font-weight: 600; }
    body.mode-day .btn-icon { color: #333; border-color: rgba(0,0,0,0.2); }
    
    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; will-change: transform, opacity; }

    /* --- CAMADA SKY & PARTÍCULAS --- */
    .sky-layer { position: fixed; inset: 0; overflow: hidden; z-index: 0; pointer-events: none; }
    
    .sun-background {
      position: absolute; width: 250px; height: 250px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fffde7 0%, #fff176 40%, #ffb300 100%);
      filter: blur(40px); opacity: 0; transition: opacity 2s;
      animation: sun-orbit 60s linear infinite;
    }
    body.mode-day .sun-background { opacity: 0.4; }
    
    @keyframes sun-orbit {
      0% { transform: translate(-20vw, 10vh); }
      50% { transform: translate(80vw, -10vh); }
      100% { transform: translate(-20vw, 10vh); }
    }

    #particles-js { position: fixed; inset: 0; z-index: 1; opacity: 0.3; pointer-events: none; transition: opacity 0.6s ease; }
    body.mode-day #particles-js { opacity: 0.1; }
    body.field-crystallizing #particles-js { opacity: 0.8; }
    body.field-closed #particles-js { opacity: 0.15; }

    #bg-fake-custom { position: fixed; inset: 0; z-index: 2; opacity: 0.2; background-size: cover; background-position: center; transition: opacity 0.5s ease; pointer-events: none; }

    /* --- HEADER / ORB --- */
    .header-orb {
      position: fixed; top: 40px; left: 50%; transform: translateX(-50%);
      width: 80px; height: 80px; z-index: 15;
      animation: floatOrb 6s ease-in-out infinite;
      pointer-events: auto; cursor: pointer;
      transition: all 0.5s ease;
      transform-origin: center;
    }
    .header-orb svg { width: 100%; height: 100%; transition: fill 0.5s ease; }

    /* Estados Visuais do Orbe */
    body.mode-day .header-orb { filter: drop-shadow(0 0 40px #ffea00); transform: translateX(-50%) scale(1.1); }
    body.mode-day .header-orb svg { fill: #fff176; }
    body.mode-sunset .header-orb { filter: drop-shadow(0 0 30px #ff5722); }
    body.mode-sunset .header-orb svg { fill: #ffd180; }
    body.mode-night .header-orb { filter: drop-shadow(0 0 15px var(--primary)); }
    body.mode-night .header-orb svg { fill: white; }

    @keyframes floatOrb { 0%,100%{transform:translate(-50%,0)} 50%{transform:translate(-50%,-10px)} }
    
    /* Display de Nome / Indicador */
    #usernameDisplay {
        position: fixed; top: 125px; left: 50%; 
        transform: translateX(-50%); z-index: 10;
        font-size: 0.8rem; color: var(--text-muted);
        opacity: 0.7; pointer-events: none;
        transition: opacity 0.3s ease; text-transform: uppercase; letter-spacing: 1px;
    }
    body.field-closed #usernameDisplay { opacity: 0.4; }

    /* Toast e Indicador de Modo */
    #nv-toast {
      position: fixed; bottom: 200px; left: 50%; transform: translateX(-50%) translateY(20px);
      background: rgba(0,0,0,0.8); color: #fff; padding: 10px 20px; border-radius: 50px;
      backdrop-filter: blur(10px); opacity: 0; transition: 0.4s; z-index: 9999;
      font-size: 0.8rem; pointer-events: none;
    }
    #nv-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
    
    #modeIndicator {
      position: fixed; top: 10px; left: 50%; transform: translateX(-50%);
      font-size: 0.65rem; color: inherit; opacity: 0.5; z-index: 9999; 
      text-transform: uppercase; letter-spacing: 1px; mix-blend-mode: overlay;
    }

    /* --- TOP BAR --- */
    .top-bar { position: fixed; top: 0; left: 0; right: 0; padding: 16px; display: flex; justify-content: space-between; align-items: flex-start; z-index: 50; pointer-events: none; }
    .top-grp { display: flex; gap: 10px; pointer-events: auto; }

    /* --- CHAT AREA --- */
    #chat-container { flex: 1; overflow-y: auto; padding: 140px 16px 100px 16px; z-index: 5; scroll-behavior: smooth; display: flex; flex-direction: column; gap: 16px; transition: all 0.45s cubic-bezier(0.2, 0.8, 0.2, 1); opacity: 1; pointer-events: auto; }
    #chat-container.collapsed { opacity: 0; pointer-events: none; transform: translateY(20px); padding-top: 500px; }

    /* Messages */
    .msg-block { max-width: 85%; padding: 14px 18px; border-radius: var(--radius-md); position: relative; animation: slideIn 0.3s ease-out; line-height: 1.6; font-size: 0.95rem; word-wrap: break-word; }
    
    /* User Msg (Default Night) */
    .msg-block.user { align-self: flex-end; background: linear-gradient(135deg, rgba(0,245,255,0.1), rgba(0,245,255,0.02)); border: var(--border-light); border-right: 3px solid var(--primary); text-align: right; }
    /* AI Msg (Default Night) */
    .msg-block.ai { align-self: flex-start; background: rgba(255,255,255,0.03); border: var(--border-light); border-left: 3px solid var(--secondary); }
    
    .msg-block.system { align-self: center; font-size: 0.8rem; opacity: 0.7; text-align: center; max-width: 90%; border: 1px dashed rgba(255,255,255,0.1); background: transparent; padding: 8px 15px; font-style: italic; letter-spacing: 0.05em; color: inherit; }
    .msg-block.system.pulse-oracular { border: 1px dashed var(--secondary); color: var(--secondary); opacity: 1; animation: pulseGlow 1.5s infinite alternate; }
    
    @keyframes pulseGlow { from { box-shadow: 0 0 5px rgba(255, 75, 255, 0.2); } to { box-shadow: 0 0 10px rgba(255, 75, 255, 0.4); } }
    @keyframes slideIn { from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)} }
    
    /* Tools */
    .msg-tools { display: flex; gap: 8px; justify-content: flex-end; margin-top: 10px; opacity: 0.6; }
    .msg-block.ai .msg-tools { justify-content: flex-start; }
    .tool-btn { background: none; border: none; color: inherit; opacity: 0.7; padding: 0; cursor: pointer; transition: 0.2s; }
    .tool-btn:hover { color: var(--primary); transform: scale(1.1); opacity: 1; }
    .tool-btn svg { width: 14px; height: 14px; stroke: currentColor; stroke-width: 2; fill: none; }
    
    .edit-save-btn {
        background: var(--primary); color: #000; border: none; border-radius: 6px; 
        padding: 8px 15px; font-weight: bold; cursor: pointer; transition: 0.2s;
        box-shadow: 0 0 10px rgba(0, 245, 255, 0.4);
    }
    .edit-save-btn:hover { background: white; box-shadow: 0 0 20px var(--primary); }

    /* --- INPUT AREA --- */
    .input-dock { position: fixed; bottom: 0; left: 0; right: 0; padding: 16px; background: linear-gradient(to top, var(--bg-deep) 20%, transparent); z-index: 20; display: flex; flex-direction: column; gap: 10px; align-items: center; }
    body.mode-day .input-dock { background: linear-gradient(to top, rgba(255,255,255,0.5) 20%, transparent); }

    #field-toggle-handle { display: flex; align-items: center; justify-content: center; gap: 10px; font-size: .78rem; letter-spacing: .08em; opacity: .8; cursor: pointer; user-select: none; transition: all .4s ease; padding-bottom: 10px; color: inherit; }
    #field-toggle-handle:hover { opacity: 1; color: var(--primary); }
    .footer-dot{ width:6px; height:6px; border-radius:50%; background:var(--secondary); box-shadow:0 0 10px var(--secondary); animation:pulse 2s infinite; }
    @keyframes pulse{50%{opacity:.4}}
    
    .input-row { display: flex; width: 100%; gap: 10px; align-items: center; }
    #input-field-wrapper { flex: 1; position: relative; }
    
    .glass-input { width: 100%; background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.15); color: white; padding: 14px 20px; padding-right: 60px; border-radius: 99px; font-family: inherit; outline: none; transition: 0.3s; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
    .glass-input:focus { border-color: var(--primary); box-shadow: 0 0 15px rgba(0, 245, 255, 0.2); background: rgba(0,0,0,0.7); }
    
    .glass-textarea { width: 100%; min-height: 120px; background: rgba(0,0,0,0.4); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 14px; border-radius: var(--radius-md); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; outline: none; transition: 0.3s; resize: vertical; }
    .glass-textarea:focus { border-color: var(--secondary); box-shadow: 0 0 15px rgba(255, 75, 255, 0.2); background: rgba(0,0,0,0.7); }

    /* --- BUTTONS --- */
    .btn-icon { width: 44px; height: 44px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; background: rgba(255,255,255,0.05); color: inherit; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(5px); }
    .btn-icon:hover { background: rgba(255,255,255,0.15); transform: scale(1.05); border-color: currentColor; }
    .btn-icon svg { width: 20px; height: 20px; stroke: currentColor; stroke-width: 2; fill: none; }
    
    .btn-primary { background: var(--primary); color: #000 !important; border: none; box-shadow: 0 0 10px rgba(0, 245, 255, 0.4); }
    .btn-primary:hover { background: #fff; box-shadow: 0 0 20px var(--primary); }
    
    #btnSend { position: absolute; right: 5px; top: 50%; transform: translateY(-50%); width: 38px; height: 38px; box-shadow: 0 0 15px rgba(0, 245, 255, 0.6); z-index: 5; }
    #btnSend:hover { box-shadow: 0 0 25px var(--primary); transform: translateY(-50%) scale(1.05); }
    #btnVoice.listening { background: var(--danger); box-shadow: 0 0 15px var(--danger); animation: listeningPulse 1s infinite; color: white !important; }
    
    @keyframes listeningPulse { 0% { transform: scale(1.0); box-shadow: 0 0 5px var(--danger); } 50% { transform: scale(1.1); box-shadow: 0 0 20px var(--danger); } 100% { transform: scale(1.0); box-shadow: 0 0 5px var(--danger); } }

    /* --- DRAWERS / MODALS --- */
    .drawer { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s; color: var(--text-main); }
    .drawer.open { opacity: 1; pointer-events: auto; }
    .drawer-content { position: absolute; top: 50%; left: 50%; width: 90%; max-width: 500px; max-height: 90%; background: var(--bg-panel); backdrop-filter: var(--glass); border: var(--border-light); border-radius: var(--radius-lg); transform: translate(-50%, -50%) scale(0.8); opacity: 0; transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.4s; display: flex; flex-direction: column; }
    .drawer.open .drawer-content { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    .drawer-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: var(--border-light); flex-shrink: 0; }
    .drawer-body { flex-grow: 1; padding: 20px; overflow-y: auto; }

    /* Forms & Status */
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
    .form-input { width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: white; border-radius: 8px; outline: none; }
    .form-small-text { font-size:0.7rem; color:var(--text-muted); margin-top:5px; }
    .input-upload-fake { display: flex; gap: 10px; align-items: center; justify-content: space-between; }
    .input-upload-fake .btn-icon { border-radius: 8px; }

    .status-display { background: rgba(0, 245, 255, 0.1); border: 1px solid var(--primary); border-radius: var(--radius-md); padding: 15px; margin-bottom: 20px; }
    .status-item { display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px dashed rgba(255, 255, 255, 0.05); }
    .status-item:last-child { border-bottom: none; }
    .status-item strong { color: var(--text-main); font-weight: 600; }
    .status-item span { color: var(--primary); font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; max-width: 60%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

    /* Cards Grid (Placeholder for memory deck) */
    .cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; }
    .slot { width: 60px; height: 80px; border: 1px dashed var(--text-muted); display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 0.8rem; }
    .fusion-area { display: flex; gap: 10px; align-items: center; justify-content: center; margin-bottom: 20px; }

    /* Responsive */
    @media (max-width: 768px) {
      #particles-js { opacity: 0.25 !important; }
      body.field-crystallizing #particles-js { opacity: 0.45 !important; }
      .header-orb { width: 60px; height: 60px; top: 24px; }
      #usernameDisplay { top: 95px; }
      #chat-container { padding-top: 120px; padding-bottom: 120px; }
      .msg-block { max-width: 92%; font-size: 0.92rem; }
      .btn-icon { width: 40px; height: 40px; }
      .drawer-content { width: 94%; max-height: 92%; }
    }
  
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

